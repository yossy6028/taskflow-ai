# TaskFlow AI 要件定義書

## 1. プロジェクト概要

### 1.1 基本情報
- **プロジェクト名**: TaskFlow AI
- **対象ユーザー**: 個人（フリーランス、個人事業主）
- **プラットフォーム**: デスクトップアプリケーション（Electron）
- **主要用途**: 企画・イベント・ブログ執筆・学習塾・コンサルティング業務

### 1.2 プロジェクトの目的
漠然とした業務アイデアや思いつきを、AIとの対話を通じて具体的で実行可能なタスクに分解し、締切から逆算した現実的なスケジュールを自動生成することで、個人事業主の業務効率化を実現する。

## 2. 機能要件

### 2.1 AI対話機能
#### 必須機能
- **対話回数**: 5〜10回の深い対話による業務の具体化
- **専門知識**: 学習塾・コンサルティング分野の専門的アドバイス
- **リアルタイム情報**: Web検索APIによる最新情報の取得と反映
- **コンテキスト保持**: 対話の文脈を保持し、一貫性のあるアドバイス提供

#### AI分析内容
- タスクの目的と成果物の明確化
- 必要なリソースの洗い出し
- リスクと対策の提案
- 類似プロジェクトからの知見提供

### 2.2 タスク管理機能
#### タスク分解
- **粒度**: 細かい作業レベルまで（最大3階層）
- **自動分解**: WBS形式での自動タスク分解
- **手動調整**: 分解後の手動編集機能

#### タスク属性
- タイトル、説明、期限
- 優先度（高・中・低）
- 推定作業時間
- 依存関係の設定
- 進捗状況（未着手・進行中・完了）
- カテゴリ/タグ

#### テンプレート機能
- 業務別テンプレート（企画、ブログ、授業準備等）
- カスタムテンプレートの作成・保存
- テンプレートの選択的適用

### 2.3 スケジューリング機能
#### 逆算スケジューリング
- 締切日からの自動逆算
- バッファ時間の自動設定（全体の20%）
- クリティカルパスの識別と表示

#### 制約条件
- **並行作業制限**: 同時進行タスクの上限設定（デフォルト3つ）
- **稼働時間**: 営業日・営業時間の設定
- **休憩時間**: 作業間の休憩時間考慮

#### 自動リスケジューリング
- 遅延発生時の自動調整
- 優先度に基づく再配置
- 締切厳守タスクの保護

### 2.4 ガントチャート機能
#### 表示機能
- タイムライン表示（日/週/月切替）
- 依存関係の矢印表示
- 進捗状況の色分け表示
- クリティカルパスのハイライト

#### 操作機能
- ドラッグ&ドロップでのタスク移動
- タスク期間の伸縮
- 依存関係の追加・削除
- ズームイン/アウト

### 2.5 カレンダー連携
#### Google Calendar統合
- **双方向同期**: アプリ⇄Google Calendar
- **同期頻度**: リアルタイム/手動選択
- **同期内容**: タスク名、期限、説明、進捗状況
- **カレンダー選択**: 特定カレンダーへの出力指定
- **カレンダー上での編集反映**: 
  - Google Calendar上でイベントを移動→アプリのガントチャートに自動反映
  - イベントの期間変更→タスク期間の自動調整
  - イベントの削除→タスクのステータス変更通知
- **競合解決**: カレンダーとアプリで同時編集時の自動マージ機能

### 2.6 データ管理
#### 保存方式
- **ローカル**: SQLiteデータベース（メイン）
- **クラウド**: Firebase（バックアップ/同期用）
- **自動保存**: 5分毎の自動保存

#### バックアップ
- 日次自動バックアップ
- 手動バックアップ機能
- バックアップからの復元

## 3. 非機能要件

### 3.1 パフォーマンス
- アプリ起動: 3秒以内
- AI応答: 5秒以内
- ガントチャート描画: 1000タスクまで快適動作

### 3.2 ユーザビリティ
- 直感的なUI（学習時間30分以内）
- キーボードショートカット対応
- ダークモード対応
- 日本語完全対応

### 3.3 信頼性
- オフライン時の基本機能動作
- データ破損時の自動復旧
- エラー時の適切なメッセージ表示

### 3.4 セキュリティ
- APIキーの暗号化保存
- ローカルデータの暗号化オプション
- 通信の暗号化（HTTPS）

## 4. システム構成

### 4.1 技術スタック
```
フロントエンド:
  - Electron
  - React 18
  - TypeScript
  - Tailwind CSS
  - Redux Toolkit

バックエンド:
  - Node.js
  - Express (ローカルAPI)
  
データベース:
  - SQLite (ローカル)
  - Firebase Firestore (クラウド)

AI/API:
  - Google Gemini 2.5 Pro/Flash API
  - Web Search API (Serper/Bing)
  - Google Calendar API

ライブラリ:
  - Gantt-elastic (ガントチャート)
  - FullCalendar (カレンダー表示)
  - vibelogger (ログ管理)
  - date-fns (日付処理)
```

### 4.2 ディレクトリ構造
```
taskflow-ai/
├── src/
│   ├── main/           # Electronメインプロセス
│   ├── renderer/       # React アプリケーション
│   │   ├── components/ # UIコンポーネント
│   │   ├── pages/      # ページコンポーネント
│   │   ├── hooks/      # カスタムフック
│   │   ├── services/   # API通信
│   │   ├── store/      # Redux store
│   │   └── utils/      # ユーティリティ
│   ├── shared/         # 共通型定義
│   └── database/       # DB スキーマ
├── public/             # 静的ファイル
├── tests/              # テストファイル
└── logs/               # ログファイル
```

## 5. 開発計画

### 5.1 フェーズ分け

#### Phase 1: MVP（2週間）
- [ ] 基本的なElectronアプリ構築
- [ ] シンプルなAI対話機能
- [ ] 基本的なタスク作成・編集
- [ ] 簡易ガントチャート表示

#### Phase 2: コア機能（3週間）
- [ ] 高度なAI対話（専門知識統合）
- [ ] タスク自動分解機能
- [ ] 逆算スケジューリング
- [ ] 依存関係管理

#### Phase 3: 統合機能（2週間）
- [ ] Google Calendar連携
- [ ] Web検索統合
- [ ] 自動リスケジューリング
- [ ] テンプレート機能

#### Phase 4: 完成・最適化（1週間）
- [ ] UI/UX改善
- [ ] パフォーマンス最適化
- [ ] テスト・デバッグ
- [ ] ドキュメント整備

### 5.2 並列実行可能タスク
以下のタスクは並列で開発可能：
1. **UI開発チーム**: Reactコンポーネント開発
2. **AI統合チーム**: OpenAI API統合、プロンプト設計
3. **データ管理チーム**: SQLite/Firebase実装
4. **カレンダー連携チーム**: Google Calendar API統合

## 6. 成功指標

### 6.1 定量的指標
- アイデアからタスクリスト生成: 15分以内
- 100タスクのスケジュール生成: 10秒以内
- アプリの安定稼働率: 99%以上

### 6.2 定性的指標
- 直感的で使いやすいUI
- AIアドバイスの的確性
- スケジュールの現実性

## 7. リスクと対策

| リスク | 影響度 | 対策 |
|--------|--------|------|
| AI APIの応答遅延 | 高 | キャッシュ機能、非同期処理 |
| 複雑な依存関係の処理 | 中 | 依存関係の上限設定、視覚化強化 |
| データ同期の競合 | 中 | ローカル優先、競合解決UI |
| OpenAI APIコスト | 低 | 使用量上限設定、キャッシュ活用 |

## 8. 今後の拡張予定
- チーム版の開発
- モバイルアプリ版
- 他カレンダーサービス対応
- AI学習機能（ユーザーの傾向学習）
- レポート・分析機能

---

**承認**: この要件定義書に基づいて開発を開始してよろしいでしょうか？